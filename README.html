<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Dotfiles</title>
<meta name="author" content="(Christopher James Hayward)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/moon.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Dotfiles</h1><h2 class="author">Christopher James Hayward</h2><p class="date">Created: 2021-02-01 Mon 19:22</p>
</section>
<section id="table-of-contents"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#/slide-orgadffe5c">1. Init</a></li>
<li><a href="#/slide-org8f8fc6b">2. Hosts</a>
<ul>
<li><a href="#/slide-org233e017">2.1. Example (Ubuntu)</a></li>
</ul>
</li>
<li><a href="#/slide-org0b2365c">3. Modules</a>
<ul>
<li><a href="#/slide-orgdd4793c">3.1. Core</a>
<ul>
<li><a href="#/slide-org0db8fd2">3.1.1. Cleanup</a></li>
<li><a href="#/slide-org1cd107e">3.1.2. Package management</a></li>
<li><a href="#/slide-org6942626">3.1.3. Hermetic evaluation</a></li>
<li><a href="#/slide-orgc105ebc">3.1.4. Literate programming</a></li>
<li><a href="#/slide-org00a627b">3.1.5. Custom keybindings</a></li>
<li><a href="#/slide-orga018793">3.1.6. Version control</a></li>
<li><a href="#/slide-orga2b2614">3.1.7. Terminal emulation</a></li>
<li><a href="#/slide-orgd52f4ef">3.1.8. File management</a></li>
</ul>
</li>
<li><a href="#/slide-org0e36e75">3.2. Desktop</a>
<ul>
<li><a href="#/slide-org638790c">3.2.1. Startup</a></li>
<li><a href="#/slide-org9aef58b">3.2.2. Applications</a></li>
<li><a href="#/slide-org088d120">3.2.3. Initialization</a></li>
<li><a href="#/slide-orgaf7966f">3.2.4. Displays</a></li>
<li><a href="#/slide-org10ae080">3.2.5. Configuration</a></li>
</ul>
</li>
<li><a href="#/slide-orgce92763">3.3. Writing</a>
<ul>
<li><a href="#/slide-orgca74f03">3.3.1. Roam</a></li>
<li><a href="#/slide-org8d05225">3.3.2. Email</a></li>
<li><a href="#/slide-org5d0b03e">3.3.3. Agenda</a></li>
<li><a href="#/slide-orgf6203b2">3.3.4. Images</a></li>
</ul>
</li>
<li><a href="#/slide-org948cfec">3.4. Projects</a>
<ul>
<li><a href="#/slide-org35f837f">3.4.1. Management</a></li>
<li><a href="#/slide-org943b33a">3.4.2. Passwords</a></li>
<li><a href="#/slide-org568a4b0">3.4.3. Debugging</a></li>
<li><a href="#/slide-orgc921b69">3.4.4. Completion</a></li>
<li><a href="#/slide-orgb186539">3.4.5. Languages</a></li>
</ul>
</li>
<li><a href="#/slide-orgf37e5fd">3.5. Interface</a>
<ul>
<li><a href="#/slide-orgaf53e98">3.5.1. Fonts</a></li>
<li><a href="#/slide-orgec9c6dd">3.5.2. Lines</a></li>
<li><a href="#/slide-orgffbcddd">3.5.3. Themes</a></li>
<li><a href="#/slide-org75d3288">3.5.4. Ligatures</a></li>
<li><a href="#/slide-org5f79d4b">3.5.5. Dashboard</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</section>
<pre class="example" id="org89bd1dc">
                              _.-="_-         _
                         _.-="   _-          | ||"""""""---._______     __..
             ___.===""""-.______-,,,,,,,,,,,,`-''----" """""       """""  __'
      __.--""     __        ,'                   o \           __        [__|
 __-""=======.--""  ""--.=================================.--""  ""--.=======:
]       [w] : /        \ : |========================|    : /        \ :  [w] :
V___________:|          |: |========================|    :|          |:   _-"
 V__________: \        / :_|=======================/_____: \        / :__-"
 -----------'  "-____-"  `-------------------------------'  "-____-"
</pre>

<p>
Immutable GNU Emacs dotfiles. Built for Life, Liberty, and the Open Road.
</p>
<ul>
<li>100% Literate</li>
<li>100% Immutable</li>
<li>100% Reproducible</li>

</ul>

<section>
<section id="slide-orgadffe5c">
<h2 id="orgadffe5c"><span class="section-number-2">1</span> Init</h2>
<p>
Although later versions of Emacs introduce <code>early-init.el</code>, it's not used in this configuration for two reasons:
</p>

<ul>
<li>It's not required due to the modularity</li>
<li>Maintaining support for older versions</li>

</ul>

<p>
Assuming you have completed all of the following tasks prior to proceeding further:
</p>

<ol>
<li>Imported the <code>secrets</code></li>
<li>Initialized the <code>passwords</code></li>
<li>Defined the <code>host</code> file</li>
<li>Created all required symbolic links</li>

</ol>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>;; Load the host configuration.
(let ((host-file (concat user-emacs-directory "/hosts/" system-name ".el")))
  (when (file-exists-p host-file)
    (load-file host-file)))

;; Load the enabled modules.
(dolist (m dotfiles/modules)
  (let ((mod-file (concat dotfiles/home "/modules/" (symbol-name m) ".el")))
    (when (file-exists-p mod-file)
      (load-file mod-file))))
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-org8f8fc6b">
<h2 id="org8f8fc6b"><span class="section-number-2">2</span> Hosts</h2>
<p>
Each host system that runs Emacs has a file defined in the <code>hosts/</code> sub directory, following the pattern of <code>$HOSTNAME.el</code>. All of the configurations are defined within this file, the values of which are read from by the other modules during startup and installation. This does <b>not</b> cover hosts that are controlled via <code>TRAMP</code>, as that will be covered in another section.
</p>

</section>
<section id="slide-org233e017">
<h3 id="org233e017"><span class="section-number-3">2.1</span> Example (Ubuntu)</h3>
<p>
The first configuration, which was built using the Ubuntu 20.04 LTS server edition. I decided to incorporate <code>flatpaks</code> into this build. Setting the <code>$BROWSER</code> variable is required in the desktop module. Set the browser to the flatpak borwser currently installed, this could change to chromium, firefox, or any other browser by changing this environment variable.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setenv "BROWSER" "flatpak run org.mozilla.firefox")
</code></pre>
</div>

<p>
Add the modules you want to initialize to the <code>dotfiles/modules</code> variable.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/modules '(core
                           desktop
                           writing
                           projects
                           interface))
</code></pre>
</div>

<p>
Specify the <code>home</code> and <code>cache</code> directories.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/cache "~/.cache/emacs")
(defvar dotfiles/home user-emacs-directory)
</code></pre>
</div>

<p>
Functionality like <code>completion</code> and <code>hints</code> can be delayed to avoid popups for common manuevers. Adjust this value to your personal taste.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/idle 0.0)
</code></pre>
</div>

<p>
Avoid the infamous <b>Emacs pinky</b> by binding <code>SPC</code> as a leader key, utilizing the thumb instead of the weaker pinky finger. You may change this value if you want to use something else.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/leader-key "SPC")
(defvar dotfiles/leader-key-global "C-SPC")
</code></pre>
</div>

<p>
Define where the source repositories are stored, for integration with the <b>Projects</b> module.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/src "~/.local/source/")
</code></pre>
</div>

<p>
Secret keys and passwords are stored in a seperate repository.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/secrets (concat dotfiles/src "secrets/"))
(defvar dotfiles/passwords (concat dotfiles/src "passwords/"))
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-org0b2365c">
<h2 id="org0b2365c"><span class="section-number-2">3</span> Modules</h2>
<p>
Breaking down the project into logical units or chapters to keep the code more maintainable and organized. This is also a fundemental requirement to achieve the goal of modularity. Incorporating just the <code>core</code> module on a build server to build literate programming projects is just one example of what can be achieved.
</p>

</section>
<section id="slide-orgdd4793c">
<h3 id="orgdd4793c"><span class="section-number-3">3.1</span> Core</h3>
<p>
Minimal configuration to make Emacs usable for my own personal workflow. This does very little in the ways of improving the visuals, only removing what is included by default and not required.
</p>

</section>
<section id="slide-org0db8fd2">
<h4 id="org0db8fd2"><span class="section-number-4">3.1.1</span> Cleanup</h4>
<p>
Emacs creates a lot of files relative to <code>user-emacs-directory</code>, these files are not part of this immutable configuration and do not belong in the emacs directory. How can we solve this issue? Shortly after initialization, before most packages are loaded, we change the value to <code>dotfiles/cache</code>. I elaborate more on the technique in my post <a href="https://chrishayward.xyz/posts/immutable_emacs/">Immutable Emacs</a>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq user-emacs-directory dotfiles/cache)
</code></pre>
</div>

<p>
Because this project uses version-control, we can disable more unwanted features:
</p>
<ul>
<li>Lock files</li>
<li>Backup files</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq create-lockfiles nil
      make-backup-files nil)
</code></pre>
</div>

</section>
<section id="slide-org1cd107e">
<h4 id="org1cd107e"><span class="section-number-4">3.1.2</span> Package management</h4>
<p>
Download and install packages using <a href="https://github.com/raxod502/straight.el">straight.el</a>, a functional package manager that integrates with <code>use-package</code>, giving us more control over where packages are sourced from.
</p>

<ul>
<li>Use the development branch</li>
<li>Integrate with <code>use-package</code></li>

</ul>

<p>
Apply the configurations prior to bootstrapping the package manager, by setting (writing) to the variables that <code>straight</code> will ultimately read from.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq straight-repository-branch "develop"
      straight-use-package-by-default t)
</code></pre>
</div>

<p>
Bootstrap the package manager, downloading, installing, or configuring depending on the state of the configuration. All packages are downloaded and built from source, and can be pinned to specific git commit hashes.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar bootstrap-version)
(let ((bootstrap-file
       (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
      (bootstrap-version 5))
  (unless (file-exists-p bootstrap-file)
    (with-current-buffer
        (url-retrieve-synchronously
         "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
         'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))
</code></pre>
</div>

<p>
Complete the integration with <code>use-package</code> by installing it with <code>straight</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(straight-use-package 'use-package)
</code></pre>
</div>

</section>
<section id="slide-org6942626">
<h4 id="org6942626"><span class="section-number-4">3.1.3</span> Hermetic evaluation</h4>
<p>
Despite having our <b>stateful</b> and <b>immutable</b> configurations seperate, it's good practice to make efforts to reduce the trash created by Emacs.
</p>

<p>
Install <a href="https://github.com/emacscollective/no-littering">no-littering</a> to reduce the files created by Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package no-littering)
</code></pre>
</div>

<p>
Emacs' default user interface is horrendous, but with less than 10 lines of code we can change that.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq inhibit-startup-message t)
(global-prettify-symbols-mode)
(scroll-bar-mode -1)
(menu-bar-mode -1)
(tool-bar-mode -1)
(tooltip-mode -1)
</code></pre>
</div>

</section>
<section id="slide-orgc105ebc">
<h4 id="orgc105ebc"><span class="section-number-4">3.1.4</span> Literate programming</h4>
<p>
<b>Organize your plain life in plain text</b>
</p>

<p>
<a href="https://orgmode.org">Org-mode</a> is one of the hallmark features of Emacs, and provides the basis for my Literate Programming platform. It's essentially a markdown language with rich features for project management, scheduling, development, and writing. It's hard to convey everything within its capabilities.
</p>

<ul>
<li><a href="https://orgmode.org/worg/org-contrib/babel/languages/index.html">Babel languages</a></li>
<li><a href="https://orgmode.org/manual/Structure-Templates.html">Structure templates</a></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package org
  :hook
  (org-mode . (lambda ()
		      (org-indent-mode)
		      (visual-line-mode 1)
		      (variable-pitch-mode 1)))
  :config
  (setq org-ellipsis " ▾"
	      org-log-done 'time
	      org-log-into-drawer t
        org-directory dotfiles/home
	      org-src-preserve-indentation t)

  (org-babel-do-load-languages
   'org-babel-load-languages
   '((shell . t)
     (python . t)
     (emacs-lisp . t)))

  (require 'org-tempo)
  (add-to-list 'org-structure-template-alist '("s" . "src"))
  (add-to-list 'org-structure-template-alist '("q" . "quote"))
  (add-to-list 'org-structure-template-alist '("e" . "example"))
  (add-to-list 'org-structure-template-alist '("sh" . "src shell"))
  (add-to-list 'org-structure-template-alist '("py" . "src python"))
  (add-to-list 'org-structure-template-alist '("el" . "src emacs-lisp")))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defun dotfiles/tangle (dir)
  "Recursively tangle the Org files within a directory."
  (interactive)
  (let ((org-files (directory-files-recursively dir "org")))
    (dolist (f org-files)
      (org-babel-tangle-file f))))
</code></pre>
</div>

</section>
<section id="slide-org00a627b">
<h4 id="org00a627b"><span class="section-number-4">3.1.5</span> Custom keybindings</h4>
<p>
Make the <code>ESC</code> key quit (most) prompts, instead of the default <code>C-g</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(global-set-key (kbd "&lt;escape&gt;") 'keyboard-escape-quit)
</code></pre>
</div>

<ol class="org-ol">
<li><a id="orgd463a03"></a>Hints<br />
<p>
Download <a href="https://github.com/justbur/emacs-which-key">which-key</a>, a package that displays the current incomplete keybinding input in a mini-buffer, showing available completion options.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package which-key
  :diminish which-key-mode
  :init (which-key-mode)
  :config (setq which-key-idle-delay dotfiles/idle))
</code></pre>
</div>
</li>

<li><a id="orgc578c10"></a>Leader<br />
<p>
Implement the <b>leader</b> key using <a href="https://github.com/noctuid/general.el">general.el</a>, letting us easily configure prefixed keybindings in a much cleaner manner than the default methods.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package general
  :config
  (general-create-definer dotfiles/leader
    :states '(normal motion)
    :keymaps 'override
    :prefix dotfiles/leader-key
    :global-prefix dotfiles/leader-key-global))
</code></pre>
</div>

<p>
Use <a href="https://github.com/abo-abo/hydra">hydra</a> for transient keybindings sharing a common prefix.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package hydra)
</code></pre>
</div>
</li>

<li><a id="orgdce8e7a"></a>Evil mode<br />
<p>
After a few hour with <code>vim</code> I knew it was game over, I cannot even think of another way I would feel comfortable editing text. Luckily, there exist packages to emulate this within Emacs. <a href="https://evil.readthedocs.io/en/latest/index.html">evil-mode</a> is the extensible VI layer for Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package evil
  :init (setq evil-want-integration t
	      evil-want-keybinding nil)
  :config (evil-mode 1))
</code></pre>
</div>

<p>
Unfortunately the default keybindings are <b>lacking</b>, but there is a community curated package <a href="https://github.com/emacs-evil/evil-collection">evil-collection</a>, which does a much better job implementing keybindings you would expect to find.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package evil-collection
  :after evil
  :config (evil-collection-init))
</code></pre>
</div>

<p>
Surround text with functions, quotations, and any other symbols using the <a href="https://github.com/emacs-evil/evil-surround">evil-surround</a> package.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package evil-surround
  :config (global-evil-surround-mode 1))
</code></pre>
</div>

<p>
<a href="https://github.com/redguardtoo/evil-nerd-commenter">https://github.com/redguardtoo/evil-nerd-commenter</a>
</p>
<ul>
<li>Toggle comments with <code>M-;</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package evil-nerd-commenter
  :bind ("M-;" . evilnc-comment-or-uncomment-lines))
</code></pre>
</div>
</li>

<li><a id="orgd86da4f"></a>Shortcuts<br />
<p>
Again cherry picked from <code>Doom</code>, I want to continue utilizing the muscle memory I have developed from a year of mainlining the framework.
</p>

<ul>
<li>Close buffers with <code>SPC c</code></li>
<li>Find files with <code>SPC . (period)</code></li>
<li>Switch buffers with <code>SPC , (comma)</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "." '(find-file :which-key "Files")
  "," '(switch-to-buffer :which-key "Buffers")
  "c" '(kill-buffer-and-window :which-key "Close"))
</code></pre>
</div>

<p>
Run helper functions with <code>SPC h</code>.
</p>
<ul>
<li>Packages <code>p</code></li>
<li>Variables <code>v</code></li>
<li>Functions <code>f</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "h" '(:ignore t :which-key "Help")
  "hp" '(describe-package :which-key "Package")
  "hv" '(describe-variable :which-key "Variable")
  "hf" '(describe-function :which-key "Function"))
</code></pre>
</div>

<p>
Quit emacs with <code>SPC q</code>.
</p>
<ul>
<li>Saving <code>q</code></li>
<li>Without <code>w</code></li>
<li>Frame (daemon) <code>f</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "q" '(:ignore t :which-key "Quit")
  "qq" '(save-buffers-kill-emacs :which-key "Save")
  "qw" '(kill-emacs :which-key "Now")
  "qf" '(delete-frame :which-key "Frame"))
</code></pre>
</div>

<p>
Window management with <code>SPC w</code>.
</p>
<ul>
<li>Swap with <code>w</code></li>
<li>Close with <code>c</code></li>
<li>Motions with <code>h,j,k,l</code></li>
<li>Split with <code>s + &lt;MOTION&gt;</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "w" '(:ignore t :which-key "Window")
  "ww" '(window-swap-states :which-key "Swap")
  "wc" '(delete-window :which-key "Close")
  "wh" '(windmove-left :which-key "Left")
  "wj" '(windmove-down :which-key "Down")
  "wk" '(windmove-up :which-key "Up")
  "wl" '(windmove-right :which-key "Right")
  "ws" '(:ignore t :which-key "Split")
  "wsj" '(split-window-below :which-key "Down")
  "wsl" '(split-window-right :which-key "Right"))
</code></pre>
</div>

<p>
Place runtime tweaks behind <code>SPC t</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "t" '(:ignore t :which-key "Tweaks"))
</code></pre>
</div>
</li>
</ol>

</section>
<section id="slide-orga018793">
<h4 id="orga018793"><span class="section-number-4">3.1.6</span> Version control</h4>
<p>
Another hallmark feature is <a href="https://github.com/magit/magit">Magit</a>, a complete git porcelain within Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package magit
  :custom (magit-display-buffer-function
           #'magit-display-buffer-same-window-except-diff-v1))
</code></pre>
</div>

<p>
Work directly with github issues / pull requests using <a href="https://github.com/magit/forge">Forge</a>.
</p>
<ul>
<li>Requires a valid <code>$GITHUB_TOKEN</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package forge)
</code></pre>
</div>

<p>
Open the <b>status</b> page for the current repository with <code>SPC g</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "g" '(magit-status :which-key "Magit"))
</code></pre>
</div>

</section>
<section id="slide-orga2b2614">
<h4 id="orga2b2614"><span class="section-number-4">3.1.7</span> Terminal emulation</h4>
<p>
While not a traditional terminal emulator, <code>eshell</code> provides me with all of the functionality I expect and require from one. Some users may be left wanting more, I would recommend they look into <code>vterm</code>.
</p>

<p>
<a href="https://github.com/zwild/eshell-prompt-extras">https://github.com/zwild/eshell-prompt-extras</a>
</p>
<ul>
<li>Enable lambda shell prompt</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package eshell-prompt-extras
  :config (setq eshell-highlight-prompt nil
	            eshell-prompt-function 'epe-theme-lambda))
</code></pre>
</div>

<p>
Open an <code>eshell</code> buffer with <code>SPC e</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "e" '(eshell :which-key "Shell"))
</code></pre>
</div>

</section>
<section id="slide-orgd52f4ef">
<h4 id="orgd52f4ef"><span class="section-number-4">3.1.8</span> File management</h4>
<p>
Emacs' can feel more modern when icon-fonts are installed and prioritized. I feel that this makes navigation of folders much faster, given that file types may be quickly identified by their corresponding icons.
</p>

<p>
<a href="https://github.com/domtronn/all-the-icons.el">https://github.com/domtronn/all-the-icons.el</a>
</p>
<ul>
<li>Collects various icon fonts</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package all-the-icons)
</code></pre>
</div>

<p>
<a href="https://github.com/jtbm37/all-the-icons-dired">https://github.com/jtbm37/all-the-icons-dired</a>
</p>
<ul>
<li>Integration with dired</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package all-the-icons-dired
  :hook (dired-mode . all-the-icons-dired-mode))
</code></pre>
</div>

<p>
When opening <code>dired</code>, I don't want to have to press <code>RET</code> twice to navigate to the current directory. This can be avoided with <code>dired-jump</code>, included in the <code>dired-x</code> package shipped with <code>dired</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(require 'dired-x)
</code></pre>
</div>

<p>
By default <code>dired</code> will create a new buffer everytime you press <code>RET</code> over a directory. In my workflow this leads to many unwanted <code>dired</code> buffers that have to be cleaned up manually. <a href="https://github.com/crocket/dired-single">Dired-single</a> lets us reuse the same dired buffer.
</p>

<ul>
<li>Move up a directory with <code>h</code></li>
<li>Open a single buffer with <code>l</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package dired-single
  :config
  (evil-collection-define-key 'normal 'dired-mode-map
    "h" 'dired-single-up-directory
    "l" 'dired-single-buffer))
</code></pre>
</div>

<p>
Open a dired buffer with <code>SPC d</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "d" '(dired-jump :which-key "Dired"))
</code></pre>
</div>

</section>
<section id="slide-org0e36e75">
<h3 id="org0e36e75"><span class="section-number-3">3.2</span> Desktop</h3>
<p>
I use Emacs as a Desktop Environment with the <a href="https://github.com/ch11ng/exwm">exwm</a> package. It allows Emacs to function as a complete tiling window manager for <code>X11</code>. My workflow includes launching the window manager with <code>xinitrc</code>, without the use of a display manager, controlling <b>everything</b> within Emacs.
</p>

</section>
<section id="slide-org638790c">
<h4 id="org638790c"><span class="section-number-4">3.2.1</span> Startup</h4>
<div class="org-src-container">

<pre  class="src src-conf"><code trim>exec dbus-launch --exit-with-session emacs -mm --debug-init
</code></pre>
</div>

<p>
When launching into a session, if the display server is not running then <code>startx</code> should be invoked, to run the window manager.
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code trim>if [ -z "${DISPLAY}" ] &amp;&amp; [ "${XDG_VTNR}" -eq 1 ]; then
    exec startx
fi
</code></pre>
</div>

</section>
<section id="slide-org9aef58b">
<h4 id="org9aef58b"><span class="section-number-4">3.2.2</span> Applications</h4>
<p>
Define a method to run an external process, allowing us to launch any application on a new process without interferring with Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defun dotfiles/run (command)
  "Run an external process."
  (interactive (list (read-shell-command "λ ")))
  (start-process-shell-command command nil command))
</code></pre>
</div>

<p>
Some methods must be called and applied to the current call process in order to function correctly with Emacs hooks.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defun dotfiles/run-in-background (command)
  (let ((command-parts (split-string command "[ ]+")))
    (apply #'call-process `(,(car command-parts) nil 0 nil ,@(cdr command-parts)))))
</code></pre>
</div>

<p>
Place keybindings for executing shell commands behind <code>SPC x</code>.
</p>

<ul>
<li>Run with <code>x</code></li>
<li>Run in backround with <code>g</code></li>
<li>Run asynchronously with <code>z</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "x" '(:ignore t :which-key "Execute")
  "xx" '(dotfiles/run :which-key "Run")
  "xb" '(dotfiles/run-in-background :which-key "Run (background)")
  "xz" '(async-shell-command :which-key "Async"))
</code></pre>
</div>

</section>
<section id="slide-org088d120">
<h4 id="org088d120"><span class="section-number-4">3.2.3</span> Initialization</h4>
<p>
When the window manager first launches the <code>init-hook</code> will be called, this allows us to define some custom logic when it's initialized.
</p>

<ul>
<li>Display time and date</li>
<li>Display battery info (if available)</li>

</ul>

<p>
In my personal configuration, I do not want the battery or time displayed within Emacs when it's not running as desktop environment because that information is typically already available.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defun dotfiles/init-hook ()
  (exwm-workspace-switch-create 1)
  (setq display-time-and-date t)
  (display-battery-mode 1)
  (display-time-mode 1))
</code></pre>
</div>

</section>
<section id="slide-orgaf7966f">
<h4 id="orgaf7966f"><span class="section-number-4">3.2.4</span> Displays</h4>
<p>
Using <code>autorandr</code> with pre configured profiles, switching screens (AKA hot plugging) is also handled through a hook.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defun dotfiles/update-display ()
  (dotfiles/run-in-background "autorandr --change --force"))
</code></pre>
</div>

</section>
<section id="slide-org10ae080">
<h4 id="org10ae080"><span class="section-number-4">3.2.5</span> Configuration</h4>
<p>
Finally we configure the window manager.
</p>

<ul>
<li>Enable <code>randr</code> support</li>

</ul>

<p>
Connect our custom hooks and configure the input keys, a custom layer for defining which keys are captured by Emacs, and which are passed through to <code>X</code> applications.
</p>

<ul>
<li>Pass through to Emacs
<ul>
<li><code>M-x</code> to Emacs</li>
<li><code>C-g</code> to Emacs</li>
<li><code>C-SPC</code> to Emacs</li>

</ul></li>

<li>Bindings with <code>S</code> (Super / Win)
<ul>
<li>Reset <code>S-r</code></li>
<li>Launch <code>S-&amp;</code></li>
<li>Workspace <code>S-[1..9]</code></li>

</ul></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package exwm
  :config
  (require 'exwm-randr)
  (exwm-randr-enable)
  (add-hook 'exwm-init-hook #'dotfiles/init-hook)
  (add-hook 'exwm-randr-screen-change-hook #'dotfiles/update-display)
  (dotfiles/update-display)
  (setq exwm-input-prefix-keys
        '(?\M-x
          ?\C-g
          ?\C-\ )
        exwm-input-global-keys
        `(([?\s-r] . exwm-reset)
          ([?\s-&amp;] . dotfiles/run)
          ,@(mapcar (lambda (i)
                      `(,(kbd (format "s-%d" i)) .
                        (lambda ()
                          (interactive)
                          (exwm-workspace-switch-create ,i))))
                    (number-sequence 1 9))))
  (exwm-enable))
</code></pre>
</div>

</section>
<section id="slide-orgce92763">
<h3 id="orgce92763"><span class="section-number-3">3.3</span> Writing</h3>
<p>
I am using <a href="https://orgmode.org">Org-mode</a> extensively for writing projects for different purposes. Most of the improvements are done in the <b>Core</b> module for the Literate programming configuration. <a href="https://github.com/integral-dw/org-superstar-mode">Org-superstar-mode</a> for making headline stars more <b>super</b>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package org-superstar
  :hook (org-mode . org-superstar-mode))
</code></pre>
</div>

<p>
I use <a href="https://gohugo.io">Hugo</a> for my personal <a href="https://chrishayward.xyz">website</a>, which I write in <code>Org-mode</code> before compiling to <code>hugo-markdown</code>. <a href="https://github.com/kaushalmodi/ox-hugo">Ox-hugo</a>, configured for <code>one-post-per-file</code> is my technique for managing my blog.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package ox-hugo 
  :after ox)
</code></pre>
</div>

<p>
Produce high quality presentations that work anywhere with <code>HTML/JS</code> and the <a href="https://revealjs.com">Reveal.js</a> package. <a href="https://github.com/hexmode/ox-reveal">Ox-reveal</a>, configured to use a <code>cdn</code> allows us to produce ones that are not dependent on a local version of <code>Reveal.js</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package ox-reveal
  :after ox
  :custom (org-reveal-root "https://cdn.jsdelivr.net/npm/reveal.js"))
</code></pre>
</div>

</section>
<section id="slide-orgca74f03">
<h4 id="orgca74f03"><span class="section-number-4">3.3.1</span> Roam</h4>
<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package org-roam
  :hook (after-init . org-roam-mode)
  :custom (org-roam-directory org-directory))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package org-roam-server
  :hook (org-roam-mode . org-roam-server-mode))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "r" '(:ignore t :which-key "Roam")
  "rf" '(org-roam-find-file :which-key "Find")
  "rb" '(org-roam-buffer-toggle-display :which-key "Buffer")
  "rd" '(:ignore t :which-key "Dailies")
  "rdd" '(org-roam-dailies-find-date :which-key "Date")
  "rdt" '(org-roam-dailies-find-today :which-key "Today")
  "rdm" '(org-roam-dailies-find-tomorrow :which-key "Tomorrow")
  "rdy" '(org-roam-dailies-find-yesterday :which-key "Yesterday"))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq org-roam-capture-templates
      '(("p" "Posts" plain (function org-roam-capture--get-point)
          "%?"
          :file-name "posts/${slug}"
          :unnarrowed t
          :head
"
#+TITLE: ${title}
#+AUTHOR: Christopher James Hayward
#+DATE: %&lt;%Y-%m-%d&gt;

#+ROAM_KEY: https://chrishayward.xyz/posts/${slug}/

#+HUGO_BASE_DIR: ~/.local/source/website
#+HUGO_AUTO_SET_LASTMOD: t
#+HUGO_SECTION: posts
")
        ("n" "Notes" plain (function org-roam-capture--get-point)
          "%?"
          :file-name "notes/${slug}"
          :unnarrowed t
          :head
"
#+TITLE: ${title}
#+AUTHOR: Christopher James Hayward

#+ROAM_KEY: https://chrishayward.xyz/notes/${slug}/

#+HUGO_BASE_DIR: ~/.local/source/website
#+HUGO_AUTO_SET_LASTMOD: t
#+HUGO_SECTION: notes
")
        ("s" "Slides" plain (function org-roam-capture--get-point)
         "%?"
         :file-name "slides/${slug}"
         :unnarrowed t
         :head
"
#+TITLE: ${title}
#+AUTHOR: Christopher James Hayward

#+REVEAL_ROOT: https://cdn.jsdelivr.net/npm/reveal.js
")))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq org-roam-dailies-capture-templates
      '(("d" "Default" entry (function org-roam-capture--get-point)
         "* %?"
         :file-name "daily/%&lt;%Y-%m-%d&gt;"
         :head
"
#+TITLE: %&lt;%Y-%m-%d&gt;
#+AUTHOR: Christopher James Hayward
")))
</code></pre>
</div>

</section>
<section id="slide-org8d05225">
<h4 id="org8d05225"><span class="section-number-4">3.3.2</span> Email</h4>
<p>
Plain text email delivered via mu, mu4e and mbsync. I run my own email server, so your configuration may differ from mine. This is the <code>mbsyncrc</code> file I use to synchronize my local mail with my server. This is required for mu4e in Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-conf"><code trim>IMAPStore xyz-remote
Host mail.chrishayward.xyz
User chris@chrishayward.xyz
PassCmd "pass chrishayward.xyz/chris"
SSLType IMAPS

MaildirStore xyz-local
Path ~/.cache/mail/
Inbox ~/.cache/mail/inbox
SubFolders Verbatim

Channel xyz
Master :xyz-remote:
Slave :xyz-local:
Patterns * !Archives
Create Both
Expunge Both
SyncState *
</code></pre>
</div>

<p>
The system typically expects to find this file at <code>$HOME/.mbsyncrc</code>, but you may also specify a custom path if launching the command using arguments. I chose to symlink the default location to my repository.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code trim>mbsync -a
mu index --maildir="~/.cache/mail"
</code></pre>
</div>

<p>
Once the mail is being synchronized, and the mail has been indexed with <code>mu</code>, it's time to install the required packages for Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package mu4e
  :load-path "/usr/share/emacs/site-lisp/mu4e"
  :config
  (setq mu4e-change-filenames-when-moving t
        mu4e-update-interval (* 5 60) ;; Every 5 minutes.
        mu4e-get-mail-command "mbsync -a"
        mu4e-maildir "~/.cache/mail"
        mu4e-compose-signature 
          (concat "Chris Hayward\n"
                  "https://chrishayward.xyz\n"))

  ;; Ensure plain text scales for all devices.
  (setq mu4e-compose-format-flowed t)

  ;; GPG signing key for outbound mail.
  (setq mml-secure-openpgp-signers '("37AB1CB72B741E478CA026D43025DCBD46F81C0F"))
  (add-hook 'message-send-hook 'mml-secure-message-sign-pgpmime)

  (setq message-send-mail-function 'smtpmail-send-it)  

  ;; Configure mail account(s).
  (setq mu4e-contexts
    (list
      ;; Main
      ;; chris@chrishayward.xyz
      (make-mu4e-context
        :name "Main"
        :match-func
          (lambda (msg)
            (when msg 
              (string-prefix-p "/Main" (mu4e-message-field msg :maildir))))
        :vars
          '((user-full-name . "Christopher James Hayward")
            (user-mail-address . "chris@chrishayward.xyz")
            (smtpmail-smtp-server . "mail.chrishayward.xyz")
            (smtpmail-smtp-service . 587)
            (smtpmail-stream-type . starttls))))))
</code></pre>
</div>

<p>
Use <a href="https://github.com/iqbalansari/mu4e-alert">mu4e-alert</a> to give us desktop notifications about incoming mail.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package mu4e-alert
  :custom
  (mu4e-alert-set-default-style 'libnotify)
  :config
  (mu4e-alert-enable-notifications)
  (mu4e-alert-enable-mode-line-display))
</code></pre>
</div>

<p>
Create a keybinding to open the mail dashboard with <code>SPC m</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "m" '(mu4e :which-key "Mail"))
</code></pre>
</div>

</section>
<section id="slide-org5d0b03e">
<h4 id="org5d0b03e"><span class="section-number-4">3.3.3</span> Agenda</h4>
<p>
Configure agenda sources.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq org-agenda-files '("~/.local/source/secrets/org/"))
</code></pre>
</div>

<p>
Open an agenda buffer with <code>SPC a</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "a" '(org-agenda :which-key "Agenda"))
</code></pre>
</div>

</section>
<section id="slide-orgf6203b2">
<h4 id="orgf6203b2"><span class="section-number-4">3.3.4</span> Images</h4>
<p>
Create screencasts with <code>one-frame-per-action</code> GIF recording via <a href="https://github.com/takaxp/emacs-gif-screencast">emacs-gif-screencast</a>.
</p>

<ul>
<li>Can be paused / resumed</li>
<li>High quality images</li>
<li>Optimized size</li>

</ul>

<p>
It requires the installation of <code>scrot</code>, <code>gifsicle</code>, and <code>convert</code> from the <code>ImageMagick</code> library.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package gif-screencast
  :custom
  (gif-screencast-output-directory (concat dotfiles/home "images/")))
</code></pre>
</div>

<p>
Screencast controls behind <code>SPC s</code>.
</p>
<ul>
<li>Start / stop with <code>s</code></li>
<li>Pause with <code>t</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "s" '(:ignore t :which-key "Screencast")
  "ss" '(gif-screencast-start-or-stop :which-key "Start / Stop")
  "sp" '(gif-screencast-toggle-pause :which-key "Pause"))
</code></pre>
</div>



</section>
<section id="slide-org948cfec">
<h3 id="org948cfec"><span class="section-number-3">3.4</span> Projects</h3>
<p>
An IDE like experience (or better) can be achieved in Emacs using two <b>Microsoft</b> open source initiatives.
</p>

<p>
Turn Emacs into an <b>IDE</b> (or better) with the <a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a>, an open source initiative from <b>Microsoft</b> for the <b>VSCode</b> editor.
</p>

<p>
<a href="https://emacs-lsp.github.io/lsp-mode/">Lsp-mode</a> brings support for language servers into Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package lsp-mode
  :custom (gc-cons-threshold 1000000000)
          (lsp-idle-delay 0.500))
</code></pre>
</div>

<p>
<a href="https://emacs-lsp.github.io/lsp-ui/">https://emacs-lsp.github.io/lsp-ui/</a>
</p>
<ul>
<li>UI improvements for <code>lsp-mode</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package lsp-ui
  :custom (lsp-ui-doc-position 'at-point)
          (lsp-ui-doc-delay 0.500))
</code></pre>
</div>

</section>
<section id="slide-org35f837f">
<h4 id="org35f837f"><span class="section-number-4">3.4.1</span> Management</h4>
<p>
Configure <a href="https://projectile.mx">projectile</a>, a project interaction library for Emacs. It provides a nice set of features for operating on a project level without introducing external dependencies.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package projectile
  :config
  (setq projectile-project-search-path '("~/.local/source"))
  (projectile-mode))
</code></pre>
</div>

</section>
<section id="slide-org943b33a">
<h4 id="org943b33a"><span class="section-number-4">3.4.2</span> Passwords</h4>
<p>
Pass makes managing passwords extremely easy, encrypring them in a file structure and providing easy commands for generating, modify, and copying passwords. <code>password-store.el</code> provides a wrapper for the functionality within Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package password-store
  :custom (password-store-dir dotfiles/passwords))
</code></pre>
</div>

<p>
Configure keybindings behind <code>SPC p</code>.
</p>
<ul>
<li>Copy with <code>p</code></li>
<li>Rename with <code>r</code></li>
<li>Generate with <code>g</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "p" '(:ignore t :which-key "Passwords")
  "pp" '(password-store-copy :which-key "Copy")
  "pr" '(password-store-rename :which-key "Rename")
  "pg" '(password-store-generate :which-key "Generate"))
</code></pre>
</div>

</section>
<section id="slide-org568a4b0">
<h4 id="org568a4b0"><span class="section-number-4">3.4.3</span> Debugging</h4>
<p>
Handled through the <a href="https://microsoft.github.io/debug-adapter-protocol/">Debug Adapter Protocol</a>, an open source initiative from <b>Microsoft</b> for the <b>VSCode</b> editor.
</p>

<p>
<a href="https://emacs-lsp.github.io/dap-mode/">Dap-mode</a> adds support for the protocol to Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package dap-mode)
</code></pre>
</div>

</section>
<section id="slide-orgc921b69">
<h4 id="orgc921b69"><span class="section-number-4">3.4.4</span> Completion</h4>
<p>
Text completion framework via <code>company</code> aka <b>Complete Anything</b>.
</p>

<p>
<a href="http://company-mode.github.io/">http://company-mode.github.io/</a>
</p>
<ul>
<li>Integrate with <code>lsp-mode</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package company)
(use-package company-lsp)
</code></pre>
</div>

</section>
<section id="slide-orgb186539">
<h4 id="orgb186539"><span class="section-number-4">3.4.5</span> Languages</h4>
<p>
Support for individual languages are implemented here.
</p>

<ol class="org-ol">
<li><a id="orgf1e5484"></a>C/C++<br />
<p>
Install the <a href="https://github.com/MaskRay/ccls">ccls</a> language server.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package ccls
  :hook ((c-mode c++-mode objc-mode cuda-mode) .
         (lambda () (require 'ccls) (lsp))))
</code></pre>
</div>
</li>

<li><a id="orgb724db2"></a>Python<br />
<p>
Install the <code>pyls</code> language server.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code trim>pip install --user "python-language-server[all]"
</code></pre>
</div>

<p>
<a href="https://www.emacswiki.org/emacs/PythonProgrammingInEmacs">python-mode</a> is an Emacs built in mode.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package python-mode
  :hook (python-mode . lsp)
  :config (require 'dap-python)
  :custom (python-shell-interpreter "python3") ;; Required if "python" is not python 3.
          (dap-python-executable "python3")    ;; Same as above.
          (dap-python-debugger 'debugpy))
</code></pre>
</div>
</li>

<li><a id="org1dbddff"></a>Go<br />
<p>
Install the <code>gopls</code> language server.
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code trim>GO111MODULE=on go get golang.org/x/tools/gopls@latest
</code></pre>
</div>

<p>
Set the <code>GOPATH</code> environment variable prior to loading, this allows us to change the default value of <code>$HOME/go</code> to <code>$HOME/.go</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setenv "GOPATH" (concat (getenv "HOME") "/.go/"))
</code></pre>
</div>

<p>
Additionally, include the <code>bin</code> subdirectory of the <code>$GOPATH</code> in the <code>$PATH</code> variable, adding compiled golang programs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setenv "PATH" (concat (getenv "GOPATH") "bin:" (getenv "PATH")))
</code></pre>
</div>

<p>
Finally we can include the <code>go-mode</code> package, integrating it with <code>lsp</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package go-mode
  :hook (go-mode . lsp))
</code></pre>
</div>

<p>
Apply some custom behaviour before saving:
</p>

<ul>
<li>Format buffer</li>
<li>Organize imports</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defun dotfiles/go-hook ()
  (add-hook 'before-save-hook #'lsp-format-buffer t t)
  (add-hook 'before-save-hook #'lsp-organize-imports t t))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(add-hook 'go-mode-hook #'dotfiles/go-hook)
</code></pre>
</div>
</li>
</ol>

</section>
<section id="slide-orgf37e5fd">
<h3 id="orgf37e5fd"><span class="section-number-3">3.5</span> Interface</h3>
<p>
<b>Bring Emacs out of the eighties</b>
</p>

</section>
<section id="slide-orgaf53e98">
<h4 id="orgaf53e98"><span class="section-number-4">3.5.1</span> Fonts</h4>
<p>
Configure the system font with a single <code>font-family</code> and define the size, of which variations to the font size are relative to this value.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defvar dotfiles/font "Fira Code")
(defvar dotfiles/font-size 96)
</code></pre>
</div>

<p>
Write out to all <b>3</b> of Emacs' default font faces.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(set-face-attribute 'default nil :font dotfiles/font :height dotfiles/font-size)
(set-face-attribute 'fixed-pitch nil :font dotfiles/font :height dotfiles/font-size)
(set-face-attribute 'variable-pitch nil :font dotfiles/font :height dotfiles/font-size)
</code></pre>
</div>

<p>
Define a transient keybinding for scaling the text.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(defhydra hydra-text-scale (:timeout 4)
  "Scale"
  ("j" text-scale-increase "Increase")
  ("k" text-scale-decrease "Decrease")
  ("f" nil "Finished" :exit t))
</code></pre>
</div>

<p>
Increase the font size in buffers with <code>SPC t f</code>.
</p>
<ul>
<li>Increase <code>j</code></li>
<li>Decrease <code>k</code></li>
<li>Finish <code>f</code></li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "tf" '(hydra-text-scale/body :which-key "Font"))
</code></pre>
</div>

</section>
<section id="slide-orgec9c6dd">
<h4 id="orgec9c6dd"><span class="section-number-4">3.5.2</span> Lines</h4>
<p>
Relative line numbers are important when using <code>VI</code> emulation keys. You can prefix most commands with a <b>number</b>, allowing you to jump up / down by a line count.
</p>

<pre class="example" id="orgd2a4cfc">
  5:
  4:
  3:
  2:
  1:
156: &lt;&lt; CURRENT LINE &gt;&gt;
  1:
  2:
  3:
  4:
  5:
</pre>

<p>
<a href="https://github.com/emacsmirror/linum-relative">https://github.com/emacsmirror/linum-relative</a>
</p>
<ul>
<li>Integrate with <code>display-line-numbers-mode</code> for performance</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package linum-relative
  :init (setq linum-relative-backend
              'display-line-numbers-mode)
  :config (linum-relative-global-mode))
</code></pre>
</div>

<p>
Add line numbers to the toggles behind <code>SPC t l</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "tl" '(linum-relative-global-mode :which-key "Lines"))
</code></pre>
</div>

<p>
<a href="https://github.com/Fanael/rainbow-delimiters">https://github.com/Fanael/rainbow-delimiters</a>
</p>
<ul>
<li>Colourize nested parenthesis</li>

</ul>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package rainbow-delimiters
  :hook (prog-mode . rainbow-delimiters-mode))
</code></pre>
</div>

</section>
<section id="slide-orgffbcddd">
<h4 id="orgffbcddd"><span class="section-number-4">3.5.3</span> Themes</h4>
<p>
Cherry pick a few modules from <code>doom-emacs</code>. High quality and modern colour themes are provided in the <a href="https://github.com/hlissner/emacs-doom-themes">doom-themes</a> package.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package doom-themes
  :init (load-theme 'doom-moonlight t))
</code></pre>
</div>

<p>
<a href="https://github.com/seagle0128/doom-modeline">doom-modeline</a> provides an elegant status bar / modeline.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package doom-modeline
  :init (doom-modeline-mode 1)
  :custom ((doom-modeline-height 16)))
</code></pre>
</div>

<p>
Load a theme with <code>SPC t t</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "tt" '(load-theme t t :which-key "Theme"))
</code></pre>
</div>

</section>
<section id="slide-org75d3288">
<h4 id="org75d3288"><span class="section-number-4">3.5.4</span> Ligatures</h4>
<p>
Enable font ligatures via <a href="https://github.com/jming422/fira-code-mode">fira-code-mode</a>, perform this action <b>only</b> when <code>Fira Code</code> is set as the current font.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package fira-code-mode
  :hook (prog-mode org-mode))
</code></pre>
</div>

<p>
Toggle global ligature mode with <code>SPC t g</code>.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(dotfiles/leader
  "tg" '(global-fira-code-mode :which-key "Ligatures"))
</code></pre>
</div>

</section>
<section id="slide-org5f79d4b">
<h4 id="org5f79d4b"><span class="section-number-4">3.5.5</span> Dashboard</h4>
<p>
Present a dashboard when first launching Emacs.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(use-package dashboard
  :config
  (setq dashboard-center-content t
        dashboard-set-init-info t
        dashboard-set-file-icons t
        dashboard-set-heading-icons t
        dashboard-startup-banner 'logo
        dashboard-projects-backend 'projectile
        dashboard-items '((projects . 5)
                          (recents . 5)
                          (agenda . 5 )))
  (dashboard-setup-startup-hook))
</code></pre>
</div>

<p>
When running in <b>daemon</b> mode, ensure that the dashboard is the initial buffer.
</p>

<div class="org-src-container">

<pre  class="src src-emacs-lisp"><code trim>(setq initial-buffer-choice
      (lambda ()
        (get-buffer "*dashboard*")))
</code></pre>
</div>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
